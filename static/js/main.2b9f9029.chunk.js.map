{"version":3,"sources":["components/Box.js","components/Board.js","components/util.js","components/Game.js","App.js","reportWebVitals.js","index.js"],"names":["Box","val","bgc","2","4","8","16","32","64","128","256","512","1024","2048","tc","className","style","backgroundColor","color","Board","board","length","renderBox","i","j","renderRow","row","Array","dict","37","38","39","40","spawn","spots","push","s","Math","floor","random","x","isValidMove","key","d","a","arr","b","k","merge","narr","fill","score_change","Game","state","score","resetState","setState","handleKeyDown","e","keyCode","i_","j_","this","document","addEventListener","removeEventListener","id","onClick","Component","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2b9f9029.chunk.js","sourcesContent":["function Box({val}) {\r\n  let colors = {\r\n    2: '#eee4da',\r\n    4: '#eee1c9',\r\n    8: '#f3b27a',\r\n    16: '#f69664',\r\n    32: '#f77c5f',\r\n    64: '#f75f3b',\r\n    128: '#edd073',\r\n    256: '#edcc62',\r\n    512: '#edc950',\r\n    1024: '#edc53f',\r\n    2048: '#edc22e'\r\n  }\r\n\r\n  let bgc = colors[val];\r\n  let tc = val > 4 ? '#ffffff' : 'rgb(119, 110, 101)';\r\n  return (\r\n    \r\n    <div className=\"obox\">\r\n      \r\n      {val !== 0 &&\r\n        <div \r\n          className=\"box\" \r\n          style={{backgroundColor: bgc, color: tc}}>\r\n            {val}\r\n        </div>\r\n      }\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Box;","import Box from \"./Box\";\r\n\r\nfunction Board({board}) {\r\n  if(board.length !== 4) return null;\r\n  const renderBox = (i, j) => <Box val={board[i][j]} key={`${i} ${j}`}/>;\r\n  const renderRow = (i) => {\r\n    let row = Array(4);\r\n    for(let j=0; j<4; ++j)\r\n      row[j] = renderBox(i, j);\r\n    return (\r\n      <div  className=\"row\" key={i}>\r\n        {row}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"board\">\r\n      {renderRow(0)}\r\n      {renderRow(1)}\r\n      {renderRow(2)}\r\n      {renderRow(3)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Board;","let dict = {37: [0, 0, 0, 1, 1, -4], //Left\r\n            38: [0, 0, 1, 0, -4, 1], //Up\r\n            39: [0, 3, 0, -1, 1, 4], //Right\r\n            40: [3, 0, -1, 0, 4, 1]}; //Down\r\n\r\nlet spawn = (board) => {\r\n  let spots = [];\r\n  for(let i=0; i<4; ++i) {\r\n    for(let j=0; j<4; ++j) {\r\n      if(board[i][j] === 0) {\r\n        spots.push([i, j]);\r\n      }\r\n    }\r\n  }\r\n  let s = spots[Math.floor(Math.random() * spots.length)];\r\n  let x = (Math.random() > 0.1) ? 2 : 4;\r\n  return [s[0], s[1], x];\r\n}\r\n\r\nlet isValidMove = (board, key) => {\r\n  let d = dict[key];\r\n  let i=d[0];\r\n  let j=d[1];\r\n\r\n  for(let a=0; a<4; ++a) {\r\n    let arr = [];\r\n    for(let b=0; b<4; ++b) {\r\n      arr.push(board[i][j]);\r\n      i += d[2];\r\n      j += d[3];\r\n    }\r\n    for(let k=1; k<4; ++k) {\r\n      if((arr[k] !== 0) && (arr[k-1] === 0 || arr[k-1] === arr[k])) {\r\n        return true;\r\n      }\r\n    }\r\n    i += d[4];\r\n    j += d[5];\r\n  }\r\n  return false;\r\n}\r\n\r\nlet merge = (arr) => {\r\n  let narr = Array(4).fill(0);\r\n  let i = 0;\r\n  let score_change = 0;\r\n  for(let j=0; j<4; ++j) {\r\n    if(arr[j] !== 0) {\r\n      if(arr[j] === narr[i]) {\r\n        narr[i] = arr[j] * 2;\r\n        score_change += narr[i];\r\n        ++i;\r\n      }\r\n      else {\r\n        if(narr[i] !== 0) ++i;\r\n        narr[i] = arr[j];\r\n      }\r\n    }\r\n  }\r\n\r\n  return [narr, score_change];\r\n}\r\n\r\nexport { dict, spawn, isValidMove, merge };","import { Component } from 'react';\r\nimport Board from './Board';\r\nimport { dict, spawn, isValidMove, merge } from './util';\r\n\r\nclass Game extends Component {\r\n  state = {board: [[]], score: 0};\r\n\r\n  componentDidMount() {\r\n    this.resetState();\r\n    document.addEventListener(\"keyup\", this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keyup\", this.handleKeyDown);\r\n  }\r\n\r\n  resetState = () => {\r\n    let board = [];\r\n    for(let i=0; i<4; ++i) {\r\n      let row = [];\r\n      for(let j=0; j<4; ++j) {\r\n        row.push(0);\r\n      }\r\n      board.push(row);\r\n    }\r\n    let a = spawn(board);\r\n    board[a[0]][a[1]] = a[2];\r\n    a = spawn(board);\r\n    board[a[0]][a[1]] = a[2];\r\n    this.setState({board, score: 0});\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n    let key = e.keyCode;\r\n    let { score, board } = this.state;\r\n    if(key < 37 || key > 40) return;\r\n    if(!isValidMove(board, key)) return;\r\n\r\n    let d = dict[key];\r\n    let i=d[0], j=d[1];\r\n    \r\n    for(let a=0; a<4; ++a) {\r\n      let arr = Array(4).fill(0);\r\n      let i_ = i;\r\n      let j_ = j;\r\n      for(let k=0; k<4; ++k) {\r\n        arr[k] = board[i_][j_];\r\n        i_ += d[2];\r\n        j_ += d[3];\r\n      }\r\n      let x = merge(arr);\r\n      let narr = x[0];\r\n      score += x[1];\r\n      for(let k=0; k<4; ++k) {\r\n        board[i][j] = narr[k];\r\n        i += d[2];\r\n        j += d[3];\r\n      }\r\n      i += d[4];\r\n      j += d[5];\r\n    }\r\n    let s = spawn(board);\r\n    board[s[0]][s[1]] = s[2];\r\n    this.setState({ board, score });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"game\">\r\n        <Board board={this.state.board}/>\r\n        <div id=\"score-reset\">\r\n          <h3 id=\"score_txt\">Score: {this.state.score}</h3>\r\n          <button onClick={this.resetState} id=\"reset-button\">Reset</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;","import Game from \"./components/Game\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>2048</h1>\n        <p id=\"tag_line\">The lesser the tiles the more the survival</p>\n      </header>\n      <Game/>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}